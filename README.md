# Hystrix Demo

## 项目介绍
* hystrixdemo_api  
  定义RPC接口
* hystrixdemo_server  
  * 提供Dubbo服务
    * Config接口提供创建类型接口随机抛出异常设置，抛出概率设置为0-10分别表示0%-100%  
      提供查询类接口超时时间设置0-maxInt
    * DemoOrderService提供模拟的订单服务
    * DemoUserService提供模拟的用户服务
* hystrixdemo_example
  * 使用隔离机制调用hystrixdemo_server的服务
* hystrix-dashboard  
  * 监控仪表板，提供请求数据统计，断路器状态，线程池使用等数据的展示
  * 使用参照hystrix-dashboard下的README.md
  
## Hystrix介绍
### 什么是Hystrix
在分布式环境中，服务依赖中的一些不可避免地会失败.Hystrix是一个库，通过添加延迟容差和容错逻辑，帮助您控制这些分布式服务之间的交互。 Hystrix通过隔离服务之间的访问点，阻止它们之间的级联故障以及提供备用选项来实现这一点，所有这些都可以提高系统的整体弹性。
### Hystrix是用来做什么的
* 保护并控制通过第三方客户端库访问的依赖关系（通常通过网络）的延迟和失败。
* 阻止复杂的分布式系统的级联失败
* 快速失败并且迅速恢复
* 可能的情况下回退并优雅地降级
* 启用接近实时的监控，警报和操作控制。
### 为什么需要Hystrix
#### 在大中型分布式系统中，通常系统很多依赖(HTTP,hession,Netty,Dubbo等)，如下图:
![soa-1-640](http://d.pr/i/10UGP+)
在高并发访问下,这些依赖的稳定性与否对系统的影响非常大,但是依赖有很多不可控问题:如网络连接缓慢，资源繁忙，暂时不可用，服务脱机等.
如下图：QPS为50的依赖 I 出现不可用，但是其他依赖仍然可用.
![soa-2-640](http://d.pr/i/10UGP+)
当依赖I 阻塞时,大多数服务器的线程池就出现阻塞(BLOCK),影响整个线上服务的稳定性.如下图:
![soa-3-640](http://d.pr/i/10UGP+)
在复杂的分布式架构的应用程序有很多的依赖，都会不可避免地在某些时候失败。高并发的依赖失败时如果没有隔离措施，当前应用服务就有被拖垮的风险。  
例如:一个依赖30个SOA服务的系统,每个服务99.99%可用。
```  
99.99%的30次方 ≈ 99.7%  
0.3% 意味着一亿次请求 会有 3,000,00次失败  
换算成时间大约每月有2个小时服务不稳定.  
随着服务依赖数量的变多，服务不稳定的概率会成指数性提高.  
```














  
  

      
    
  
  
